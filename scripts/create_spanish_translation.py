#!/usr/bin/env python3
"""
Create Spanish translation file for PyGameMaker IDE
Based on the French translation template
"""

import re
import os

# Spanish translation dictionary - comprehensive translations
# Format: English source -> Spanish translation
TRANSLATIONS = {
    # About Dialog
    "About PyGameMaker IDE": "Acerca de PyGameMaker IDE",
    "PyGameMaker IDE": "PyGameMaker IDE",
    "Version 0.9.0": "Versi√≥n 0.9.0",
    "Version 1.0.0": "Versi√≥n 1.0.0",
    "About": "Acerca de",
    "Credits": "Cr√©ditos",
    "Close": "Cerrar",

    # Common UI elements
    "OK": "Aceptar",
    "Cancel": "Cancelar",
    "Apply": "Aplicar",
    "Save": "Guardar",
    "Open": "Abrir",
    "New": "Nuevo",
    "Delete": "Eliminar",
    "Edit": "Editar",
    "Add": "A√±adir",
    "Remove": "Quitar",
    "Clear": "Limpiar",
    "Reset": "Restablecer",
    "Yes": "S√≠",
    "No": "No",
    "Error": "Error",
    "Warning": "Advertencia",
    "Information": "Informaci√≥n",
    "Confirm": "Confirmar",
    "Help": "Ayuda",
    "Settings": "Configuraci√≥n",
    "Options": "Opciones",
    "Preferences": "Preferencias",
    "Properties": "Propiedades",
    "Name": "Nombre",
    "Type": "Tipo",
    "Value": "Valor",
    "Description": "Descripci√≥n",
    "File": "Archivo",
    "Folder": "Carpeta",
    "Path": "Ruta",
    "Size": "Tama√±o",
    "Date": "Fecha",
    "Status": "Estado",
    "Enabled": "Habilitado",
    "Disabled": "Deshabilitado",
    "Default": "Predeterminado",
    "Custom": "Personalizado",
    "None": "Ninguno",
    "All": "Todo",
    "Select": "Seleccionar",
    "Select All": "Seleccionar todo",
    "Deselect All": "Deseleccionar todo",
    "Copy": "Copiar",
    "Paste": "Pegar",
    "Cut": "Cortar",
    "Undo": "Deshacer",
    "Redo": "Rehacer",
    "Find": "Buscar",
    "Replace": "Reemplazar",
    "Search": "Buscar",
    "Refresh": "Actualizar",
    "Reload": "Recargar",
    "Import": "Importar",
    "Export": "Exportar",
    "Browse...": "Examinar...",
    "Choose...": "Elegir...",
    "Select...": "Seleccionar...",
    "Loading...": "Cargando...",
    "Saving...": "Guardando...",
    "Processing...": "Procesando...",
    "Please wait...": "Por favor espere...",
    "Done": "Listo",
    "Finished": "Terminado",
    "Success": "√âxito",
    "Failed": "Fall√≥",
    "Unknown": "Desconocido",
    "Untitled": "Sin t√≠tulo",
    "New Project": "Nuevo proyecto",
    "Open Project": "Abrir proyecto",
    "Save Project": "Guardar proyecto",
    "Close Project": "Cerrar proyecto",
    "Recent Projects": "Proyectos recientes",
    "Exit": "Salir",
    "Quit": "Salir",

    # Menu items
    "&File": "&Archivo",
    "&Edit": "&Editar",
    "&View": "&Ver",
    "&Tools": "&Herramientas",
    "&Run": "&Ejecutar",
    "&Help": "&Ayuda",
    "&Resources": "&Recursos",
    "Language": "Idioma",
    "Run": "Ejecutar",
    "Tools": "Herramientas",
    "View": "Ver",
    "Resources": "Recursos",

    # Resources
    "Sprites": "Sprites",
    "Sounds": "Sonidos",
    "Backgrounds": "Fondos",
    "Objects": "Objetos",
    "Rooms": "Salas",
    "Scripts": "Scripts",
    "Fonts": "Fuentes",
    "Timelines": "L√≠neas de tiempo",
    "Paths": "Rutas",
    "Data Files": "Archivos de datos",
    "Game Information": "Informaci√≥n del juego",
    "Global Game Settings": "Configuraci√≥n global del juego",

    # Sprite editor
    "Sprite": "Sprite",
    "Sprite Editor": "Editor de sprites",
    "Edit Sprite": "Editar sprite",
    "Image": "Imagen",
    "Frame": "Fotograma",
    "Frames": "Fotogramas",
    "Animation": "Animaci√≥n",
    "Animation Speed": "Velocidad de animaci√≥n",
    "Origin": "Origen",
    "Origin X": "Origen X",
    "Origin Y": "Origen Y",
    "Center": "Centro",
    "Top Left": "Superior izquierda",
    "Top Center": "Superior centro",
    "Top Right": "Superior derecha",
    "Middle Left": "Medio izquierda",
    "Middle Center": "Centro",
    "Middle Right": "Medio derecha",
    "Bottom Left": "Inferior izquierda",
    "Bottom Center": "Inferior centro",
    "Bottom Right": "Inferior derecha",
    "Width": "Ancho",
    "Height": "Alto",
    "Transparent": "Transparente",
    "Smooth edges": "Suavizar bordes",
    "Preload texture": "Precargar textura",
    "Collision Mask": "M√°scara de colisi√≥n",
    "Bounding Box": "Cuadro delimitador",
    "Precise": "Preciso",
    "Rectangle": "Rect√°ngulo",
    "Ellipse": "Elipse",
    "Diamond": "Rombo",
    "Left": "Izquierda",
    "Right": "Derecha",
    "Top": "Superior",
    "Bottom": "Inferior",

    # Sound editor
    "Sound": "Sonido",
    "Sound Editor": "Editor de sonidos",
    "Edit Sound": "Editar sonido",
    "Play": "Reproducir",
    "Stop": "Detener",
    "Pause": "Pausar",
    "Loop": "Bucle",
    "Volume": "Volumen",
    "Pan": "Panor√°mica",
    "Preload": "Precargar",
    "Audio": "Audio",
    "Music": "M√∫sica",
    "Sound Effect": "Efecto de sonido",

    # Background editor
    "Background": "Fondo",
    "Background Editor": "Editor de fondos",
    "Edit Background": "Editar fondo",
    "Tile": "Mosaico",
    "Tile Horizontally": "Mosaico horizontal",
    "Tile Vertically": "Mosaico vertical",
    "Stretch": "Estirar",
    "Horizontal Speed": "Velocidad horizontal",
    "Vertical Speed": "Velocidad vertical",

    # Object editor
    "Object": "Objeto",
    "Object Editor": "Editor de objetos",
    "Edit Object": "Editar objeto",
    "Parent": "Padre",
    "Parent Object": "Objeto padre",
    "No Parent": "Sin padre",
    "Mask": "M√°scara",
    "Sprite Mask": "M√°scara de sprite",
    "Same as sprite": "Igual que el sprite",
    "Visible": "Visible",
    "Solid": "S√≥lido",
    "Persistent": "Persistente",
    "Depth": "Profundidad",
    "Events": "Eventos",
    "Actions": "Acciones",
    "Add Event": "A√±adir evento",
    "Delete Event": "Eliminar evento",
    "Add Action": "A√±adir acci√≥n",
    "Delete Action": "Eliminar acci√≥n",
    "Duplicate": "Duplicar",
    "Move Up": "Mover arriba",
    "Move Down": "Mover abajo",

    # Events
    "Create": "Crear",
    "Destroy": "Destruir",
    "Step": "Paso",
    "Begin Step": "Inicio de paso",
    "End Step": "Fin de paso",
    "Alarm": "Alarma",
    "Keyboard": "Teclado",
    "Key Press": "Tecla presionada",
    "Key Release": "Tecla liberada",
    "Mouse": "Rat√≥n",
    "Collision": "Colisi√≥n",
    "Other": "Otro",
    "Draw": "Dibujar",
    "Game Start": "Inicio del juego",
    "Game End": "Fin del juego",
    "Room Start": "Inicio de sala",
    "Room End": "Fin de sala",
    "Animation End": "Fin de animaci√≥n",
    "Path End": "Fin de ruta",
    "Outside Room": "Fuera de sala",
    "Intersect Boundary": "Intersecci√≥n con l√≠mite",
    "User Defined": "Definido por usuario",
    "Global Left Button": "Bot√≥n izquierdo global",
    "Global Right Button": "Bot√≥n derecho global",
    "Global Middle Button": "Bot√≥n central global",
    "Left Button": "Bot√≥n izquierdo",
    "Right Button": "Bot√≥n derecho",
    "Middle Button": "Bot√≥n central",
    "Left Pressed": "Izquierdo presionado",
    "Right Pressed": "Derecho presionado",
    "Middle Pressed": "Central presionado",
    "Left Released": "Izquierdo liberado",
    "Right Released": "Derecho liberado",
    "Middle Released": "Central liberado",
    "Mouse Enter": "Rat√≥n entra",
    "Mouse Leave": "Rat√≥n sale",
    "Mouse Wheel Up": "Rueda arriba",
    "Mouse Wheel Down": "Rueda abajo",
    "No Key": "Sin tecla",
    "Any Key": "Cualquier tecla",
    "Space": "Espacio",
    "Enter": "Intro",
    "Escape": "Escape",
    "Arrow Left": "Flecha izquierda",
    "Arrow Right": "Flecha derecha",
    "Arrow Up": "Flecha arriba",
    "Arrow Down": "Flecha abajo",

    # Room editor
    "Room": "Sala",
    "Room Editor": "Editor de salas",
    "Edit Room": "Editar sala",
    "Room Settings": "Configuraci√≥n de sala",
    "Room Size": "Tama√±o de sala",
    "Room Speed": "Velocidad de sala",
    "Room Caption": "T√≠tulo de sala",
    "Persistent Room": "Sala persistente",
    "Creation Code": "C√≥digo de creaci√≥n",
    "Instances": "Instancias",
    "Instance": "Instancia",
    "Add Instance": "A√±adir instancia",
    "Delete Instance": "Eliminar instancia",
    "Instance Layer": "Capa de instancia",
    "Background Layer": "Capa de fondo",
    "Views": "Vistas",
    "View": "Vista",
    "Enable Views": "Habilitar vistas",
    "View in Room": "Vista en sala",
    "Port on Screen": "Puerto en pantalla",
    "Object Following": "Seguir objeto",
    "Grid": "Cuadr√≠cula",
    "Show Grid": "Mostrar cuadr√≠cula",
    "Snap to Grid": "Ajustar a cuadr√≠cula",
    "Grid Width": "Ancho de cuadr√≠cula",
    "Grid Height": "Alto de cuadr√≠cula",
    "Isometric Grid": "Cuadr√≠cula isom√©trica",
    "Zoom": "Zoom",
    "Zoom In": "Acercar",
    "Zoom Out": "Alejar",
    "Reset Zoom": "Restablecer zoom",
    "Fit to Window": "Ajustar a ventana",

    # Actions categories
    "Move": "Mover",
    "Movement": "Movimiento",
    "Main1": "Principal 1",
    "Main2": "Principal 2",
    "Control": "Control",
    "Score": "Puntuaci√≥n",
    "Extra": "Extra",
    "Drawing": "Dibujo",
    "Code": "C√≥digo",

    # Common actions
    "Set Motion": "Establecer movimiento",
    "Set Direction": "Establecer direcci√≥n",
    "Set Speed": "Establecer velocidad",
    "Set Gravity": "Establecer gravedad",
    "Set Friction": "Establecer fricci√≥n",
    "Jump to Position": "Saltar a posici√≥n",
    "Jump to Random": "Saltar a aleatorio",
    "Jump to Start": "Saltar al inicio",
    "Wrap Screen": "Envolver pantalla",
    "Move to Contact": "Mover a contacto",
    "Bounce": "Rebotar",
    "Set Path": "Establecer ruta",
    "End Path": "Terminar ruta",
    "Set Alarm": "Establecer alarma",
    "Execute Code": "Ejecutar c√≥digo",
    "Execute Script": "Ejecutar script",
    "Comment": "Comentario",
    "Variable": "Variable",
    "Set Variable": "Establecer variable",
    "Test Variable": "Probar variable",
    "If Variable": "Si variable",
    "Test Expression": "Probar expresi√≥n",
    "Start Block": "Iniciar bloque",
    "End Block": "Terminar bloque",
    "Else": "Si no",
    "Repeat": "Repetir",
    "Exit Event": "Salir de evento",
    "Call Parent Event": "Llamar evento padre",
    "Create Instance": "Crear instancia",
    "Create Moving": "Crear en movimiento",
    "Create Random": "Crear aleatorio",
    "Change Instance": "Cambiar instancia",
    "Destroy Instance": "Destruir instancia",
    "Destroy at Position": "Destruir en posici√≥n",
    "Set Sprite": "Establecer sprite",
    "Transform Sprite": "Transformar sprite",
    "Color Sprite": "Colorear sprite",
    "Play Sound": "Reproducir sonido",
    "Stop Sound": "Detener sonido",
    "Check Sound": "Verificar sonido",
    "Previous Room": "Sala anterior",
    "Next Room": "Sala siguiente",
    "Restart Room": "Reiniciar sala",
    "Goto Room": "Ir a sala",
    "Go to Room": "Ir a sala",
    "If Previous Room Exists": "Si existe sala anterior",
    "If Next Room Exists": "Si existe sala siguiente",
    "Set Lives": "Establecer vidas",
    "Set Score": "Establecer puntuaci√≥n",
    "Set Health": "Establecer salud",
    "Draw Lives": "Dibujar vidas",
    "Draw Score": "Dibujar puntuaci√≥n",
    "Draw Health": "Dibujar salud",
    "Set Caption": "Establecer t√≠tulo",
    "Show Message": "Mostrar mensaje",
    "Show Info": "Mostrar informaci√≥n",
    "Restart Game": "Reiniciar juego",
    "End Game": "Terminar juego",
    "Draw Sprite": "Dibujar sprite",
    "Draw Background": "Dibujar fondo",
    "Draw Text": "Dibujar texto",
    "Draw Rectangle": "Dibujar rect√°ngulo",
    "Draw Ellipse": "Dibujar elipse",
    "Draw Line": "Dibujar l√≠nea",
    "Draw Arrow": "Dibujar flecha",
    "Draw Gradient Horizontal": "Dibujar degradado horizontal",
    "Draw Gradient Vertical": "Dibujar degradado vertical",
    "Set Color": "Establecer color",
    "Set Font": "Establecer fuente",
    "Set Full Screen": "Establecer pantalla completa",
    "Take Snapshot": "Tomar captura",
    "Create Effect": "Crear efecto",

    # Run menu
    "Run Game": "Ejecutar juego",
    "Run in Debug Mode": "Ejecutar en modo depuraci√≥n",
    "Stop Game": "Detener juego",
    "Compile": "Compilar",
    "Export to Windows": "Exportar a Windows",
    "Export to HTML5": "Exportar a HTML5",
    "Export to Linux": "Exportar a Linux",
    "Export to Kivy": "Exportar a Kivy",

    # Export dialog
    "Export Project": "Exportar proyecto",
    "Export Settings": "Configuraci√≥n de exportaci√≥n",
    "Target Platform": "Plataforma destino",
    "Output Folder": "Carpeta de salida",
    "Game Name": "Nombre del juego",
    "Game Icon": "Icono del juego",
    "Include Debug Info": "Incluir informaci√≥n de depuraci√≥n",
    "Compress Output": "Comprimir salida",
    "Export Progress": "Progreso de exportaci√≥n",
    "Exporting...": "Exportando...",
    "Export Complete": "Exportaci√≥n completada",
    "Export Failed": "Exportaci√≥n fallida",

    # Preferences dialog
    "General": "General",
    "Appearance": "Apariencia",
    "Editor": "Editor",
    "Compiler": "Compilador",
    "Font Settings": "Configuraci√≥n de fuente",
    "Font Size": "Tama√±o de fuente",
    "Font Family": "Familia de fuente",
    "Theme": "Tema",
    "Dark Theme": "Tema oscuro",
    "Light Theme": "Tema claro",
    "System Theme": "Tema del sistema",
    "Show Line Numbers": "Mostrar n√∫meros de l√≠nea",
    "Show Whitespace": "Mostrar espacios en blanco",
    "Word Wrap": "Ajuste de l√≠nea",
    "Tab Size": "Tama√±o de tabulaci√≥n",
    "Use Spaces": "Usar espacios",
    "Auto-Indent": "Sangr√≠a autom√°tica",
    "Auto-Complete": "Autocompletado",
    "Syntax Highlighting": "Resaltado de sintaxis",
    "Backup": "Respaldo",
    "Auto-Save": "Guardado autom√°tico",
    "Auto-Save Settings": "Configuraci√≥n de guardado autom√°tico",
    "Enable automatic saving": "Habilitar guardado autom√°tico",
    "Save Interval": "Intervalo de guardado",
    "seconds": "segundos",
    "minutes": "minutos",
    " seconds": " segundos",
    "Save every:": "Guardar cada:",
    "Presets:": "Preajustes:",
    "15s": "15s",
    "30s": "30s",
    "1m": "1m",
    "2m": "2m",
    "5m": "5m",

    # Blockly
    "Blockly Editor": "Editor Blockly",
    "Visual Programming": "Programaci√≥n visual",
    "Blocks": "Bloques",
    "Toolbox": "Caja de herramientas",
    "Workspace": "Espacio de trabajo",
    "Clear Workspace": "Limpiar espacio de trabajo",
    "Generate Code": "Generar c√≥digo",
    "Show Code": "Mostrar c√≥digo",
    "Variables": "Variables",
    "Functions": "Funciones",
    "Logic": "L√≥gica",
    "Loops": "Bucles",
    "Math": "Matem√°ticas",
    "Text": "Texto",
    "Lists": "Listas",
    "Colour": "Color",
    "Procedures": "Procedimientos",
    "if": "si",
    "else": "si no",
    "true": "verdadero",
    "false": "falso",
    "and": "y",
    "or": "o",
    "not": "no",
    "equals": "igual a",
    "not equals": "diferente de",
    "less than": "menor que",
    "greater than": "mayor que",
    "less or equal": "menor o igual",
    "greater or equal": "mayor o igual",
    "repeat": "repetir",
    "times": "veces",
    "while": "mientras",
    "for each": "para cada",
    "in list": "en lista",
    "break": "romper",
    "continue": "continuar",

    # Messages and dialogs
    "Are you sure?": "¬øEst√° seguro?",
    "Delete confirmation": "Confirmar eliminaci√≥n",
    "Do you want to save changes?": "¬øDesea guardar los cambios?",
    "Unsaved changes": "Cambios sin guardar",
    "This action cannot be undone.": "Esta acci√≥n no se puede deshacer.",
    "Project has been saved.": "El proyecto ha sido guardado.",
    "Project has been exported.": "El proyecto ha sido exportado.",
    "An error occurred.": "Ha ocurrido un error.",
    "File not found.": "Archivo no encontrado.",
    "Invalid file format.": "Formato de archivo inv√°lido.",
    "Permission denied.": "Permiso denegado.",
    "Operation cancelled.": "Operaci√≥n cancelada.",
    "Please select an item.": "Por favor seleccione un elemento.",
    "Please enter a name.": "Por favor ingrese un nombre.",
    "Name already exists.": "El nombre ya existe.",
    "Invalid name.": "Nombre inv√°lido.",
    "Cannot delete.": "No se puede eliminar.",
    "Cannot rename.": "No se puede renombrar.",
    "Cannot move.": "No se puede mover.",
    "Cannot copy.": "No se puede copiar.",
    "No items selected.": "No hay elementos seleccionados.",
    "Select a file": "Seleccione un archivo",
    "Select a folder": "Seleccione una carpeta",
    "Select an image": "Seleccione una imagen",
    "Select a sound": "Seleccione un sonido",
    "Image Files": "Archivos de imagen",
    "Sound Files": "Archivos de sonido",
    "All Files": "Todos los archivos",
    "Project Files": "Archivos de proyecto",

    # Asset tree
    "Create Sprite": "Crear sprite",
    "Create Sound": "Crear sonido",
    "Create Background": "Crear fondo",
    "Create Object": "Crear objeto",
    "Create Room": "Crear sala",
    "Create Script": "Crear script",
    "Create Font": "Crear fuente",
    "Rename": "Renombrar",
    "Show in Explorer": "Mostrar en explorador",
    "Expand All": "Expandir todo",
    "Collapse All": "Contraer todo",

    # Import/Export
    "Import Assets": "Importar recursos",
    "Import Sprite": "Importar sprite",
    "Import Sound": "Importar sonido",
    "Import Background": "Importar fondo",
    "Import from File": "Importar desde archivo",
    "Import from Folder": "Importar desde carpeta",
    "Export Asset": "Exportar recurso",
    "Export to File": "Exportar a archivo",
    "Export All": "Exportar todo",

    # Status messages
    "Ready": "Listo",
    "Modified": "Modificado",
    "Saved": "Guardado",
    "Running": "Ejecutando",
    "Compiling": "Compilando",
    "Connected": "Conectado",
    "Disconnected": "Desconectado",

    # Properties panel
    "X": "X",
    "Y": "Y",
    "X:": "X:",
    "Y:": "Y:",
    "Position": "Posici√≥n",
    "Scale": "Escala",
    "Rotation": "Rotaci√≥n",
    "Angle": "√Ångulo",
    "Alpha": "Alfa",
    "Blend": "Mezcla",
    "Color": "Color",
    "Image Speed": "Velocidad de imagen",
    "Image Index": "√çndice de imagen",

    # Directions
    "Direction": "Direcci√≥n",
    "Horizontal": "Horizontal",
    "Vertical": "Vertical",
    "speed": "velocidad",
    "direction": "direcci√≥n",
    "gravity": "gravedad",
    "gravity direction": "direcci√≥n de gravedad",
    "friction": "fricci√≥n",
    "hspeed": "vel. horizontal",
    "vspeed": "vel. vertical",

    # Instance variables
    "x": "x",
    "y": "y",
    "xprevious": "x anterior",
    "yprevious": "y anterior",
    "xstart": "x inicial",
    "ystart": "y inicial",
    "image_speed": "velocidad de imagen",
    "image_index": "√≠ndice de imagen",
    "image_xscale": "escala x de imagen",
    "image_yscale": "escala y de imagen",
    "image_angle": "√°ngulo de imagen",
    "image_alpha": "alfa de imagen",
    "image_blend": "mezcla de imagen",
    "visible": "visible",
    "solid": "s√≥lido",
    "persistent": "persistente",
    "depth": "profundidad",
    "alarm": "alarma",
    "path_position": "posici√≥n en ruta",
    "path_speed": "velocidad en ruta",

    # Game variables
    "score": "puntuaci√≥n",
    "lives": "vidas",
    "health": "salud",
    "room": "sala",
    "room_speed": "velocidad de sala",
    "room_width": "ancho de sala",
    "room_height": "alto de sala",
    "room_caption": "t√≠tulo de sala",
    "mouse_x": "rat√≥n x",
    "mouse_y": "rat√≥n y",
    "fps": "fps",

    # Additional UI elements
    "Note: Some settings require restarting the IDE to take effect.": "Nota: Algunos ajustes requieren reiniciar el IDE para aplicarse.",
    "Current project:": "Proyecto actual:",
    "No project open": "Sin proyecto abierto",
    "Create a new project": "Crear un nuevo proyecto",
    "Open an existing project": "Abrir un proyecto existente",
    "Recent projects:": "Proyectos recientes:",
    "No recent projects": "Sin proyectos recientes",
    "Welcome to PyGameMaker IDE": "Bienvenido a PyGameMaker IDE",
    "Start a new project or open an existing one": "Inicie un nuevo proyecto o abra uno existente",

    # Keyboard keys
    "Numpad0": "N√∫m0",
    "Numpad1": "N√∫m1",
    "Numpad2": "N√∫m2",
    "Numpad3": "N√∫m3",
    "Numpad4": "N√∫m4",
    "Numpad5": "N√∫m5",
    "Numpad6": "N√∫m6",
    "Numpad7": "N√∫m7",
    "Numpad8": "N√∫m8",
    "Numpad9": "N√∫m9",
    "Multiply": "Multiplicar",
    "Divide": "Dividir",
    "Subtract": "Restar",
    "Plus": "M√°s",
    "Insert": "Insertar",
    "Home": "Inicio",
    "End": "Fin",
    "PageUp": "Re P√°g",
    "PageDown": "Av P√°g",
    "Tab": "Tab",
    "Backspace": "Retroceso",
    "Shift": "May√∫s",
    "Alt": "Alt",
    "CapsLock": "Bloq May√∫s",

    # HTML related
    "HTML5 Export": "Exportar HTML5",
    "Generate HTML5": "Generar HTML5",
    "Web Export": "Exportar Web",
    "Browser": "Navegador",

    # Windows related
    "Windows Export": "Exportar Windows",
    "Generate EXE": "Generar EXE",
    "Executable": "Ejecutable",
    "Windows Executable": "Ejecutable Windows",

    # Linux related
    "Linux Export": "Exportar Linux",
    "Linux Binary": "Binario Linux",

    # More common strings
    "Configure": "Configurar",
    "Configure...": "Configurar...",
    "Configuration": "Configuraci√≥n",
    "Advanced": "Avanzado",
    "Advanced Settings": "Configuraci√≥n avanzada",
    "Basic": "B√°sico",
    "Simple": "Simple",
    "Complex": "Complejo",
    "Create New": "Crear nuevo",
    "Create New...": "Crear nuevo...",
    "Load": "Cargar",
    "Load...": "Cargar...",
    "Unload": "Descargar",
    "Test": "Probar",
    "Test Game": "Probar juego",
    "Debug": "Depurar",
    "Debug Mode": "Modo depuraci√≥n",
    "Release": "Lanzamiento",
    "Release Mode": "Modo lanzamiento",
    "Build": "Compilar",
    "Rebuild": "Recompilar",
    "Clean": "Limpiar",
    "Output": "Salida",
    "Console": "Consola",
    "Log": "Registro",
    "Errors": "Errores",
    "Warnings": "Advertencias",
    "Messages": "Mensajes",
    "Show": "Mostrar",
    "Hide": "Ocultar",
    "Toggle": "Alternar",
    "Fullscreen": "Pantalla completa",
    "Window": "Ventana",
    "Minimize": "Minimizar",
    "Maximize": "Maximizar",
    "Restore": "Restaurar",
    "Always on Top": "Siempre visible",
    "Layout": "Dise√±o",
    "Reset Layout": "Restablecer dise√±o",
    "Default Layout": "Dise√±o predeterminado",

    # Tool tips and hints
    "Click to add": "Clic para a√±adir",
    "Double-click to edit": "Doble clic para editar",
    "Right-click for options": "Clic derecho para opciones",
    "Drag to move": "Arrastrar para mover",
    "Drop here": "Soltar aqu√≠",
    "Press Escape to cancel": "Presione Escape para cancelar",
    "Press Enter to confirm": "Presione Intro para confirmar",

    # Actions panel strings
    "Apply to:": "Aplicar a:",
    "Self": "Propio",
    "Relative": "Relativo",
    "NOT": "NO",
    "Question": "Pregunta",
    "Apply to": "Aplicar a",

    # Room properties
    "Caption:": "T√≠tulo:",
    "Width:": "Ancho:",
    "Height:": "Alto:",
    "Speed:": "Velocidad:",
    "Show color": "Mostrar color",
    "Background color": "Color de fondo",
    "Visible at start": "Visible al inicio",
    "Foreground image": "Imagen en primer plano",
    "Stretch image": "Estirar imagen",
    "Object to follow:": "Objeto a seguir:",

    # More translations
    "Select Object": "Seleccionar objeto",
    "Select Sprite": "Seleccionar sprite",
    "Select Sound": "Seleccionar sonido",
    "Select Room": "Seleccionar sala",
    "Select Background": "Seleccionar fondo",
    "(No objects available)": "(Sin objetos disponibles)",
    "(No sprites available)": "(Sin sprites disponibles)",
    "(No sounds available)": "(Sin sonidos disponibles)",
    "(No rooms available)": "(Sin salas disponibles)",
    "(No backgrounds available)": "(Sin fondos disponibles)",
    "Choose Color": "Elegir color",
    "Choose Color...": "Elegir color...",
    "Enter code here...": "Ingrese c√≥digo aqu√≠...",
    "Enter text here...": "Ingrese texto aqu√≠...",
    "Enter value...": "Ingrese valor...",
    "Message:": "Mensaje:",
    "Value:": "Valor:",
    "Code:": "C√≥digo:",
    "Script:": "Script:",
    "Expression:": "Expresi√≥n:",
    "Condition:": "Condici√≥n:",
    "Amount:": "Cantidad:",
    "Number:": "N√∫mero:",
    "Count:": "Cantidad:",
    "Index:": "√çndice:",
    "Object:": "Objeto:",
    "Sprite:": "Sprite:",
    "Sound:": "Sonido:",
    "Room:": "Sala:",
    "Background:": "Fondo:",
    "Target:": "Objetivo:",
    "Source:": "Origen:",
    "Destination:": "Destino:",
    "Position:": "Posici√≥n:",
    "Size:": "Tama√±o:",
    "Offset:": "Desplazamiento:",

    # Asset dialogs
    "New Sprite": "Nuevo sprite",
    "New Sound": "Nuevo sonido",
    "New Background": "Nuevo fondo",
    "New Object": "Nuevo objeto",
    "New Room": "Nuevo sala",
    "New Script": "Nuevo script",
    "New Font": "Nueva fuente",
    "Sprite Properties": "Propiedades de sprite",
    "Sound Properties": "Propiedades de sonido",
    "Background Properties": "Propiedades de fondo",
    "Object Properties": "Propiedades de objeto",
    "Room Properties": "Propiedades de sala",

    # Tree view
    "Game Resources": "Recursos del juego",
    "Add Resource": "A√±adir recurso",
    "Sort by Name": "Ordenar por nombre",
    "Sort by Date": "Ordenar por fecha",

    # More actions
    "Move Fixed": "Mover fijo",
    "Move Free": "Mover libre",
    "Move Towards": "Mover hacia",
    "Speed Horizontal": "Velocidad horizontal",
    "Speed Vertical": "Velocidad vertical",
    "Reverse Horizontal": "Invertir horizontal",
    "Reverse Vertical": "Invertir vertical",
    "Set Hspeed": "Establecer vel. horizontal",
    "Set Vspeed": "Establecer vel. vertical",
    "Check Empty": "Verificar vac√≠o",
    "Check Collision": "Verificar colisi√≥n",
    "Check Object": "Verificar objeto",
    "Sleep": "Dormir",
    "Set Timeline": "Establecer l√≠nea de tiempo",
    "Timeline Position": "Posici√≥n en l√≠nea de tiempo",
    "Timeline Speed": "Velocidad de l√≠nea de tiempo",
    "Start Timeline": "Iniciar l√≠nea de tiempo",
    "Pause Timeline": "Pausar l√≠nea de tiempo",
    "Stop Timeline": "Detener l√≠nea de tiempo",

    # Dialog buttons
    "Accept": "Aceptar",
    "Reject": "Rechazar",
    "Ignore": "Ignorar",
    "Retry": "Reintentar",
    "Abort": "Abortar",
    "Continue": "Continuar",
    "Back": "Atr√°s",
    "Next": "Siguiente",
    "Previous": "Anterior",
    "Finish": "Finalizar",

    # File operations
    "New File": "Nuevo archivo",
    "Open File": "Abrir archivo",
    "Save File": "Guardar archivo",
    "Save As": "Guardar como",
    "Save All": "Guardar todo",
    "Close File": "Cerrar archivo",
    "Close All": "Cerrar todo",
    "Print": "Imprimir",
    "Print Preview": "Vista previa de impresi√≥n",

    # Edit operations
    "Select None": "Seleccionar ninguno",
    "Invert Selection": "Invertir selecci√≥n",
    "Find Next": "Buscar siguiente",
    "Find Previous": "Buscar anterior",
    "Replace All": "Reemplazar todo",
    "Go to Line": "Ir a l√≠nea",

    # More UI
    "Toolbar": "Barra de herramientas",
    "Status Bar": "Barra de estado",
    "Properties Panel": "Panel de propiedades",
    "Resources Panel": "Panel de recursos",
    "Output Panel": "Panel de salida",
    "Inspector": "Inspector",
    "Navigator": "Navegador",
    "Outline": "Esquema",
    "Hierarchy": "Jerarqu√≠a",

    # Object editor specific
    "Uses physics": "Usa f√≠sica",
    "Sensor": "Sensor",
    "Awake": "Despierto",
    "Kinematic": "Cinem√°tico",
    "Linear damping": "Amortiguaci√≥n lineal",
    "Angular damping": "Amortiguaci√≥n angular",
    "Density": "Densidad",
    "Restitution": "Restituci√≥n",
    "Collision group": "Grupo de colisi√≥n",
    "Shape": "Forma",
    "Show collision mask": "Mostrar m√°scara de colisi√≥n",

    # Room settings
    "Physics World": "Mundo f√≠sico",
    "Enable physics": "Habilitar f√≠sica",
    "Gravity X": "Gravedad X",
    "Gravity Y": "Gravedad Y",
    "Pixels to meters": "P√≠xeles a metros",

    # View settings
    "Viewport": "Ventana gr√°fica",
    "Camera": "C√°mara",
    "Following": "Siguiendo",
    "Horizontal border": "Borde horizontal",
    "Vertical border": "Borde vertical",
    "Horizontal speed": "Velocidad horizontal",
    "Vertical speed": "Velocidad vertical",

    # Instance editor
    "Instance Properties": "Propiedades de instancia",
    "Creation code": "C√≥digo de creaci√≥n",
    "Instance ID": "ID de instancia",
    "Layer": "Capa",
    "Locked": "Bloqueado",

    # Export options
    "Include sources": "Incluir fuentes",
    "Create installer": "Crear instalador",
    "Show console": "Mostrar consola",
    "Single file": "Archivo √∫nico",
    "Compression": "Compresi√≥n",
    "Icon": "Icono",
    "Splash screen": "Pantalla de inicio",
    "Loading bar": "Barra de carga",

    # Error messages
    "Project not found": "Proyecto no encontrado",
    "Failed to load project": "Error al cargar proyecto",
    "Failed to save project": "Error al guardar proyecto",
    "Failed to export": "Error al exportar",
    "Compilation failed": "Compilaci√≥n fallida",
    "Runtime error": "Error en tiempo de ejecuci√≥n",
    "Syntax error": "Error de sintaxis",
    "Missing resource": "Recurso faltante",
    "Invalid resource": "Recurso inv√°lido",

    # Confirmations
    "Save changes to {0}?": "¬øGuardar cambios en {0}?",
    "Delete {0}?": "¬øEliminar {0}?",
    "Are you sure you want to delete {0}?": "¬øEst√° seguro de que desea eliminar {0}?",
    "Overwrite {0}?": "¬øSobrescribir {0}?",
    "File already exists. Overwrite?": "El archivo ya existe. ¬øSobrescribir?",
    "Discard changes?": "¬øDescartar cambios?",

    # Progress
    "Loading project...": "Cargando proyecto...",
    "Saving project...": "Guardando proyecto...",
    "Exporting game...": "Exportando juego...",
    "Compiling...": "Compilando...",
    "Building...": "Construyendo...",
    "Please wait...": "Por favor espere...",
    "Operation in progress...": "Operaci√≥n en progreso...",

    # Numbers and units
    "pixels": "p√≠xeles",
    "pixel": "p√≠xel",
    "degrees": "grados",
    "percent": "por ciento",
    "milliseconds": "milisegundos",
    "ms": "ms",
    "px": "px",

    # More translations for specific contexts
    "Imported": "Importado",
    "Not imported": "No importado",
    "Created:": "Creado:",
    "Modified:": "Modificado:",
    "File:": "Archivo:",
    "Status:": "Estado:",
    "Type:": "Tipo:",
    "Name:": "Nombre:",

    # Context menu items
    "Cut": "Cortar",
    "Copy": "Copiar",
    "Paste": "Pegar",
    "Delete": "Eliminar",
    "Rename": "Renombrar",
    "Duplicate": "Duplicar",
    "Properties...": "Propiedades...",
    "Edit...": "Editar...",
    "Open in Editor": "Abrir en editor",

    # Tooltips
    "New project": "Nuevo proyecto",
    "Open project": "Abrir proyecto",
    "Save project": "Guardar proyecto",
    "Run game": "Ejecutar juego",
    "Stop game": "Detener juego",
    "Undo last action": "Deshacer √∫ltima acci√≥n",
    "Redo last action": "Rehacer √∫ltima acci√≥n",

    # Blockly specific
    "Event Blocks": "Bloques de eventos",
    "Action Blocks": "Bloques de acciones",
    "Movement Blocks": "Bloques de movimiento",
    "Drawing Blocks": "Bloques de dibujo",
    "Control Blocks": "Bloques de control",
    "Instance Blocks": "Bloques de instancia",
    "Room Blocks": "Bloques de sala",
    "Sound Blocks": "Bloques de sonido",
    "Score Blocks": "Bloques de puntuaci√≥n",

    # Event names in events tree
    "Create Event": "Evento Crear",
    "Destroy Event": "Evento Destruir",
    "Step Event": "Evento Paso",
    "Draw Event": "Evento Dibujar",
    "Alarm Event": "Evento Alarma",
    "Keyboard Event": "Evento Teclado",
    "Mouse Event": "Evento Rat√≥n",
    "Collision Event": "Evento Colisi√≥n",
    "Other Event": "Otro Evento",

    # Dialog titles
    "Add Event": "A√±adir evento",
    "Select Event Type": "Seleccionar tipo de evento",
    "Select Key": "Seleccionar tecla",
    "Select Mouse Button": "Seleccionar bot√≥n del rat√≥n",
    "Select Object for Collision": "Seleccionar objeto para colisi√≥n",
    "Select Alarm Number": "Seleccionar n√∫mero de alarma",

    # Action configuration
    "Action Properties": "Propiedades de acci√≥n",
    "Configure Action": "Configurar acci√≥n",
    "Action Type": "Tipo de acci√≥n",
    "Action Parameters": "Par√°metros de acci√≥n",

    # More UI strings
    "Project": "Proyecto",
    "Game": "Juego",
    "Asset": "Recurso",
    "Resource": "Recurso",
    "Assets": "Recursos",
    "Library": "Biblioteca",
    "Built-in": "Integrado",
    "User-defined": "Definido por usuario",
    "Extension": "Extensi√≥n",
    "Plugin": "Plugin",

    # Format strings (keep placeholders)
    "{0} Properties - {1}": "Propiedades de {0} - {1}",
    "Type: {0}": "Tipo: {0}",
    "File: {0}": "Archivo: {0}",
    "Status: {0}": "Estado: {0}",
    "Created: {0}": "Creado: {0}",
    "Modified: {0}": "Modificado: {0}",

    # Special action strings
    "‚Üí Next Room": "‚Üí Sala siguiente",
    "‚Üê Previous Room": "‚Üê Sala anterior",
    "‚Ü∫ Restart Current Room": "‚Ü∫ Reiniciar sala actual",
    "‚öôÔ∏è Configure...": "‚öôÔ∏è Configurar...",
    "üìã Configure Actions...": "üìã Configurar acciones...",
    "üé® Choose Color...": "üé® Elegir color...",
    "üì• Import Image...": "üì• Importar imagen...",
    "üé® {0}": "üé® {0}",
    "X: ": "X: ",
    "Y: ": "Y: ",

    # Import dialog
    "Import Image": "Importar imagen",
    "Import Sound": "Importar sonido",
    "Import Background": "Importar fondo",
    "Select files to import": "Seleccionar archivos a importar",
    "Importing...": "Importando...",
    "Import complete": "Importaci√≥n completada",
    "Import failed": "Importaci√≥n fallida",

    # More specific strings
    "Actions are now managed through the Events panel": "Las acciones ahora se gestionan a trav√©s del panel de Eventos",
    "When enabled, your project will be saved automatically at regular intervals.": "Cuando est√° habilitado, su proyecto se guardar√° autom√°ticamente a intervalos regulares.",
    "‚ö†Ô∏è  Shorter intervals may impact performance on large projects.": "‚ö†Ô∏è  Intervalos m√°s cortos pueden afectar el rendimiento en proyectos grandes.",
}

def translate_ts_file(input_file, output_file):
    """Read a TS file and create a Spanish translation."""

    with open(input_file, 'r', encoding='utf-8') as f:
        content = f.read()

    # Change language attribute
    content = re.sub(r'language="[^"]*"', 'language="es_ES"', content)
    if 'language=' not in content:
        content = content.replace('<TS version="2.1">', '<TS version="2.1" language="es_ES">')

    def replace_translation(match):
        full_match = match.group(0)
        source_match = re.search(r'<source>(.*?)</source>', full_match, re.DOTALL)

        if not source_match:
            return full_match

        source = source_match.group(1)
        # Unescape HTML entities for lookup
        lookup_source = source.replace('&apos;', "'").replace('&quot;', '"').replace('&amp;', '&').replace('&lt;', '<').replace('&gt;', '>')

        # Look for translation
        if lookup_source in TRANSLATIONS:
            translation = TRANSLATIONS[lookup_source]
            # Escape for XML
            translation = translation.replace('&', '&amp;').replace('<', '&lt;').replace('>', '&gt;').replace("'", '&apos;').replace('"', '&quot;')
            # Replace unfinished or empty translation
            new_match = re.sub(
                r'<translation[^>]*>.*?</translation>|<translation[^>]*/>',
                f'<translation>{translation}</translation>',
                full_match,
                flags=re.DOTALL
            )
            return new_match

        return full_match

    # Pattern to match each message block
    pattern = r'<message>.*?</message>'
    content = re.sub(pattern, replace_translation, content, flags=re.DOTALL)

    with open(output_file, 'w', encoding='utf-8') as f:
        f.write(content)

    return content

def main():
    script_dir = os.path.dirname(os.path.abspath(__file__))
    project_dir = os.path.dirname(script_dir)
    translations_dir = os.path.join(project_dir, 'translations')

    # Use French file as template (it has the most complete structure)
    input_file = os.path.join(translations_dir, 'pygm2_fr.ts')
    output_file = os.path.join(translations_dir, 'pygm2_es.ts')

    if not os.path.exists(input_file):
        print(f"Template file not found: {input_file}")
        return

    print(f"Creating Spanish translation from French template...")
    print(f"Input: {input_file}")
    print(f"Output: {output_file}")
    print(f"Translations defined: {len(TRANSLATIONS)}")

    translate_ts_file(input_file, output_file)

    # Count results
    with open(output_file, 'r', encoding='utf-8') as f:
        content = f.read()

    total = content.count('<message>')
    unfinished = content.count('type="unfinished"')
    vanished = content.count('type="vanished"')
    translated = total - unfinished - vanished

    print(f"\nResults:")
    print(f"  Total messages: {total}")
    print(f"  Translated: {translated}")
    print(f"  Unfinished: {unfinished}")
    print(f"  Vanished: {vanished}")
    print(f"  Completion: {translated * 100 // total}%")
    print(f"\nSpanish translation file created: {output_file}")

if __name__ == '__main__':
    main()
